import{r as e,u as l,V as a,a as t,M as o,b as u,c as s,d,F as i,f as r,g as n,h as c,n as p,x as m,T as v,i as g,j as h,q as f,I as b,m as y,k as x,l as _,J as w,o as k,v as V,aV as C,aW as U,aX as z,X as j,aQ as S,aR as L,p as O,W as I,a7 as A}from"./index.34872ab0.1730902649514.js";import{S as W}from"./sortable.esm.c2baa127.1730902649514.js";import{_ as E}from"./wapp.bd2b2f5f.1730902649514.js";import{T as F}from"./textIcon.3c9e3b5d.1730902649514.js";const T={class:"globalLink"},R={class:"globalLink-left relative"},G={class:"w-full h-full absolute overflow-y-scroll p-4 space-y-1"},J=["onClick"],q={class:"globalLink-right p-4 pl-4"},B={class:"globalLink-right-item"},D={class:"p-4 bg-gray-50 rounded-lg transition-all hover:bg-gray-200"},M={class:"flex"},N=["src"],P={class:"flex items-center justify-between w-full"},X={style:{width:"calc(100% - 50px)"}},K={class:"text-lg font-bold flex items-center"},Q={class:"mr-2"},Y={key:0,style:{width:"20px",height:"20px"},src:E},H={class:"text-sm text-gray-500 text-ellipsis whitespace-nowrap overflow-hidden",style:{width:"230px"}},Z={class:"mt-2 flex items-center"},$={class:"text-sm"},ee={key:1,style:{"z-index":"9999999"},class:"absolute w-full flex-col flex justify-center items-center h-full bg-gray-400 z-20 bg-opacity-100 rounded-lg"},le={class:"fenYe"},ae={__name:"globalLink",setup(k){const V=e([]),C=e(!0),U=e(),z=e([]),j=l(),S=e({current_page:1,per_page:18,total:0,data:[]}),L=e=>{U.value=e.id,S.value.data=[],C.value=!0,I()};sessionStorage.getItem("folders")?(z.value=JSON.parse(sessionStorage.getItem("folders")),z.value.length>0&&L(z.value[0])):a({url:"/admin.Index/folders"}).then((e=>{1===e.code&&(z.value=e.data,z.value.length>0&&L(z.value[0]),sessionStorage.setItem("folders",JSON.stringify(e.data)))}));const O=({name:e,url:l})=>!V.value.find((a=>a.name===e||a.url===l));function I(){if(!j.state.auth)return void(C.value=!1);let e=U.value;a({url:"/admin.Index/links",params:{folders:e,page:S.value.current_page,limit:S.value.per_page}}).then((l=>{1===l.code&&U.value===e&&(S.value=l.data,V.value=l.local)})).finally((e=>{C.value=!1}))}const A=e=>{S.value.data=[],S.value.current_page=e,C.value=!0,I()};return(e,l)=>{const k=t("el-button"),I=t("el-empty"),W=t("el-pagination"),E=o("loading");return u(),s("div",T,[d("div",{onClick:l[0]||(l[0]=_((()=>{}),["stop"])),class:"globalLinkItem"},[d("div",R,[d("div",G,[(u(!0),s(i,null,r(z.value,(e=>(u(),n(v,{key:e.id},{default:c((()=>[d("div",{onClick:l=>L(e),class:p(["cursor-pointer px-4 py-2 rounded-lg text-sm transition-all",{"bg-rose-500 text-white":U.value===e.id}])},m(e.name),11,J)])),_:2},1024)))),128))])]),d("div",q,[g((u(),s("div",B,[h(j).state.auth?(u(!0),s(i,{key:0},r(S.value.data,(e=>(u(),n(v,{key:e.id},{default:c((()=>[d("div",D,[d("div",M,[d("img",{src:h(f)(e.src),style:{width:"50px",height:"50px","border-radius":"8px","margin-right":"10px","object-fit":"cover","flex-shrink":"0"},alt:""},null,8,N),d("div",P,[d("div",X,[d("div",K,[d("span",Q,m(e.name),1),l[1]||(l[1]=b()),1===e.app?(u(),s("img",Y)):y("",!0)]),d("div",H,m(e.url),1)]),O(e)?(u(),n(k,{key:0,type:"danger",class:"ml-2",size:"small",onClickOnce:l=>(e=>{a({url:"/LinkStore/addPublic",method:"post",data:e}).then((e=>{1===e.code&&V.value.push(e.data),w.success(e.msg)}))})(e)},{default:c((()=>l[2]||(l[2]=[b("添加")]))),_:2},1032,["onClickOnce"])):y("",!0)])]),d("div",Z,[d("div",$,m(e.tips),1)])])])),_:2},1024)))),128)):(u(),s("div",ee,l[3]||(l[3]=[d("div",{class:"text-4xl font-bold text-white"}," 此功能属于高级版本请获取授权后使用 喵呜～ ",-1),d("a",{href:"https://mtab.cc/pricing.html",target:"_blank",class:"mt-6 text-xs p-2 px-6 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full ml-8 text-white"},"获取订阅授权解锁更多功能",-1)])))])),[[E,C.value]]),C.value||0!==S.value.data.length?y("",!0):(u(),n(I,{key:0,description:"我也母鸡到啊~ 他没数据啊！换其他分类试试",class:"col-auto"})),d("div",le,[x(W,{"current-page":S.value.current_page,"page-size":S.value.per_page,onCurrentChange:A,layout:"prev, pager, next, jumper",total:S.value.total,"page-sizes":[18,27,30]},null,8,["current-page","page-size","total"])])])])])}}};const te={class:"flex gap-2 h-full"},oe={class:"flex flex-col flex-shrink-0 bg-white w-52 px-2 py-4 rounded-lg",style:{height:"calc(100vh - 30px)"}},ue={class:"h-full relative overflow-y-scroll leftScrollBackground"},se={class:"space-y-1 mb-4",id:"list"},de=["onClick","data-id"],ie={class:"flex pr-1"},re={key:0,class:"flex items-center gap-2 ml-auto"},ne={key:0,class:"mt-2"},ce={class:"space-x-2"},pe={class:"sticky bottom-0 flex justify-center"},me={class:"linkstoreAdmin flex-1",style:{width:"calc(100% - 220px)"}},ve={class:"p-4 bg-white rounded-lg overflow-hidden flex flex-wrap gap-4"},ge={class:"ml-auto"},he={class:"mt-2 p-4 bg-white rounded-lg overflow-hidden w-full"},fe=["src"],be={class:"space-x-2"},ye={style:{display:"flex","align-items":"center",width:"100%"}},xe=["src"],_e={class:"w-full relative"},we={class:"border p-4 rounded-lg flex gap-x-4 w-full"},ke={class:"flex gap-x-2"},Ve={class:"border p-4 mt-4 rounded-lg flex gap-x-4 w-full"},Ce={class:"bgColorPicker"},Ue=["onClick"],ze={key:0,class:"touming"},je={key:0,style:{"font-size":"20px",color:"#ff0000",inset:"-5px 3px",position:"relative"}},Se={key:0,style:{"font-size":"20px",color:"#d9d9d9",inset:"-5px 3px",position:"relative"}},Le={class:"flex mt-6 mb-2"},Oe={__name:"linkstore",setup(f){const E=e([]);a({url:"/User/UserGroup"}).then((e=>{1===e.code&&(E.value=e.data)})).finally((e=>{E.value.unshift({name:"全部可见",id:0})}));const T=e(!1);let R=null;const G=e(0),J=e(!0),q=e(),B=e([]),D=e=>{B.value=e},M=e(!1),N=async()=>{await a({url:"/Link/refreshWebAppCache"}),w.success("用户端WebApp刷新完毕，用户刷新后可看到最新数据")};k((()=>{let e=document.getElementById("list");if(e){const l={animation:200,delay:500,delayOnTouchOnly:!0,draggable:".item",onUpdate:function(e){let l=R.toArray(),t=[],o=l.length;l.forEach(((e,l)=>{t.push({id:parseInt(e),sort:o-l})})),a({url:"/LinkStore/sortFolder",method:"post",data:t}).then((e=>{e.code}))}};R=W.create(e,l)}}));const P={id:"",name:"",sort:0,group_ids:[]},X=e(Object.assign({},P)),K=e([]),Q=["rgba(0,0,0,0)","#fff","rgb(22, 129, 255)","rgb(251, 190, 35)","rgb(252, 69, 72)","rgb(75, 60, 54)","rgb(125, 172, 104)","rgb(2, 51, 115)","rgb(200, 172, 112)","rgb(55, 33, 40)","rgb(5, 64, 146)"],Y=()=>{J.value=!0,a({url:"/LinkStore/getFolderAdmin"}).then((e=>{K.value=e.data,K.value.unshift({id:0,name:"全部标签",group_ids:[]})})).finally((e=>{J.value=!1}))};Y();const H=e({name:"",area:"",group_id:""}),Z=()=>{M.value=!0},$=(e="")=>{if(e){e=e.split(",");const l=[];return e.forEach((e=>{const a=K.value.find((l=>l.id.toString()===e));a&&l.push(a.name)})),l.join(",")}return""},ee=e(!1),le=l(),Oe=e(!1),Ie=e({}),Ae={immersion:0,width:1200,height:700,controllerColor:"#ffffff",maximize:1,minimization:1,resize:1,userEdit:0},We=()=>{Ie.value={area:[],group_ids:[],custom:Object.assign({},Ae)},G.value>0&&(Ie.value.area=[G.value.toString()]),Oe.value=!0},Ee=(e={})=>{X.value=0===e?Object.assign({},P):Object.assign({},e),ee.value=!0,setTimeout((()=>{document.querySelector(".autofocus input").click()}),200)},Fe=()=>{a({url:"/LinkStore/createFolder",method:"post",data:{type:"edit",info:X.value}}).then((e=>{w.success(e.msg),1===e.code&&(Y(),ee.value=!1)}))},Te=e=>{if(Ie.value=Object.assign({},e),Ie.value.custom=Object.assign(Object.assign({},Ae),e.custom),e.area){const l=e.area.split(",");l.length>0&&""!==l[0]?Ie.value.area=l:Ie.value.area=[]}else Ie.value.area=[];Oe.value=!0},Re=e=>{j.confirm("是否删除选中的标签？","删除提示").then((l=>{a({url:"/LinkStore/del",method:"post",data:{ids:"object"==typeof e?e:[e]}}).then((e=>{w.success(e.msg),Ye()}))})).catch((()=>{w.warning("已取消操作")}))},Ge=()=>{if(B.value.length>0){let e=[];B.value.forEach((l=>{e.push(l.id)})),Re(e)}},Je=()=>{const l=e([]);let t=[];E.value.forEach((e=>{t.push(U(z,{label:e.name,value:e.id}))})),j({title:"请选择移动的用户分组","close-on-click-modal":!1,draggable:!0,"custom-style":{width:"100%"},message:()=>U(C,{modelValue:l.value,multiple:!0,placeholder:"请选择移动的用户分组可多选",class:"w-full","onUpdate:modelValue":e=>{l.value=e}},(()=>t))}).then((e=>{let t={link:B.value.map((e=>e.id)),group_ids:l.value.join(",")};a({url:"/LinkStore/moveGroup",method:"post",data:t}).then((e=>{Ye(),w.success(null==e?void 0:e.msg)}))})).catch((e=>{w.warning("已取消操作")}))},qe=()=>{const l=e([]);let t=[];K.value.forEach((e=>{t.push(U(z,{label:e.name,value:e.id}))})),j({title:"请选择移动的分类","close-on-click-modal":!1,draggable:!0,"custom-style":{width:"100%"},message:()=>U(C,{modelValue:l.value,multiple:!0,placeholder:"请选择移动的分类可多选",class:"w-full","onUpdate:modelValue":e=>{l.value=e}},(()=>t))}).then((e=>{let t={link:B.value.map((e=>e.id)),area:l.value.join(",")};a({url:"/LinkStore/moveFolder",method:"post",data:t}).then((e=>{Ye(),w.success(e.msg)}))})).catch((e=>{w.warning("已取消操作")}))},Be=e=>{1===e.code&&(Ie.value.src=e.data.url)};let De=e(!1);const Me=async()=>{De.value=!0;try{const e=await a({url:"/Api/getIcon",method:"post",data:{url:Ie.value.url}});1===e.code?(Ie.value.src=e.data.src,Ie.value.name=e.data.name.substring(0,30)):w.error("获取网站数据失败,请手动设置")}catch(e){console.error("Error fetching data:",e),w.error("获取网站数据失败,请手动设置")}De.value=!1},Ne=()=>{Ie.value.status=1,Pe()},Pe=()=>{let e=Object.assign({},Ie.value);e.area&&(e.area=e.area.join(",")),a({url:"/LinkStore/add",method:"post",data:{form:e}}).then((e=>{w.success(e.msg),Oe.value=!1,Ye()}))},Xe=e({current_page:1,per_page:50,total:0,refresh(e){Xe.value.current_page=e,Ye()},sizes(e){Xe.value.per_page=e,Ye()}}),Ke=e([]),Qe={order:"desc",prop:"id"},Ye=()=>{De.value=!0,a({url:"/LinkStore/ListManager",method:"post",data:{search:H.value,page:Xe.value.current_page,limit:Xe.value.per_page,sort:Qe}}).then((e=>{Ke.value=e.data.data,Object.assign(Xe.value,e.data),T.value=e.auth})).finally((e=>{De.value=!1}))},He=({column:e,prop:l,order:a})=>{let t="asc";"descending"===a&&(t="desc"),Qe.order=t,Qe.prop=l,Ye()};return Ye(),(e,l)=>{const f=t("el-icon"),k=t("el-text"),U=t("el-button"),W=t("el-input"),T=t("el-tooltip"),R=t("el-table-column"),P=t("el-tag"),Ae=t("el-table"),Qe=t("el-pagination"),Ze=t("el-form-item"),$e=t("el-upload"),el=t("el-switch"),ll=t("el-color-picker"),al=t("el-input-number"),tl=t("el-form"),ol=t("el-dialog"),ul=t("el-link"),sl=o("loading");return u(),s(i,null,[d("div",te,[g((u(),s("div",oe,[d("div",ue,[g(d("div",se,[(u(!0),s(i,null,r(K.value,(e=>(u(),n(v,null,{default:c((()=>[d("div",{onClick:l=>(e=>{G.value=e.id,H.value.area=e.id,Ye()})(e),"data-id":null==e?void 0:e.id,class:p(["relative border-b item px-3 py-1.5 text-sm rounded-sm cursor-pointer flex flex-col overflow-hidden",{"bg-slate-200 text-blue-400":G.value===e.id}])},[d("div",ie,[d("div",null,m(e.name),1),e.id?(u(),s("div",re,[x(f,{class:"hover:text-blue-600",onClick:_((l=>Ee(e)),["stop"])},{default:c((()=>[x(h(S))])),_:2},1032,["onClick"]),x(f,{class:"cursor-move"},{default:c((()=>[x(h(L))])),_:1})])):y("",!0)]),e.id>0?(u(),s("div",ne,[d("div",ce,[(u(!0),s(i,null,r(E.value.filter((l=>e.group_ids.indexOf(l.id)>-1)),(e=>(u(),n(v,null,{default:c((()=>[x(k,{size:"small",class:"cursor-context-menu text-gray-500"},{default:c((()=>[b(m(e.name),1)])),_:2},1024)])),_:2},1024)))),256))])])):y("",!0)],10,de)])),_:2},1024)))),256))],512),[[V,K.value.length]]),g(d("div",pe,[x(U,{class:"w-11/12",type:"primary",onClick:l[0]||(l[0]=e=>Ee(0))},{default:c((()=>l[32]||(l[32]=[b("创建标签分类")]))),_:1})],512),[[V,!J.value]])])])),[[sl,J.value]]),d("div",me,[d("div",ve,[x(W,{modelValue:H.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>H.value.name=e),style:{width:"200px"},placeholder:"名称搜索",clearable:""},null,8,["modelValue"]),x(h(C),{clearable:"",modelValue:H.value.group_id,"onUpdate:modelValue":l[2]||(l[2]=e=>H.value.group_id=e),style:{width:"200px"},placeholder:"请选择用户分组"},{default:c((()=>[(u(!0),s(i,null,r(E.value,(e=>(u(),n(v,null,{default:c((()=>[x(h(z),{label:e.name,value:e.id},null,8,["label","value"])])),_:2},1024)))),256))])),_:1},8,["modelValue"]),x(U,{onClick:Ye,type:"primary"},{default:c((()=>l[33]||(l[33]=[b("搜索")]))),_:1}),x(U,{type:"danger",onClick:We},{default:c((()=>l[34]||(l[34]=[b("添加新标签")]))),_:1}),x(U,{style:{background:"lightseagreen",color:"#F3F3F3"},round:"",onClick:Z},{default:c((()=>l[35]||(l[35]=[b(" 公共标签库 ")]))),_:1}),d("div",ge,[x(T,{content:"当你的WebApp有变更时，<br/>可以通过此按钮强制刷新所有用户的WebApp缓存，<br/>以保证用户看到最新的WebApp内容","raw-content":""},{default:c((()=>[x(U,{type:"success",round:"",onClick:N},{default:c((()=>l[36]||(l[36]=[b("刷新用户WebApp缓存")]))),_:1})])),_:1}),B.value.length>0?(u(),n(U,{key:0,type:"danger",onClick:Ge,round:""},{default:c((()=>l[37]||(l[37]=[b("批量删除")]))),_:1})):y("",!0),B.value.length>0?(u(),n(U,{key:1,type:"warning",onClick:Je,round:""},{default:c((()=>l[38]||(l[38]=[b("批量用户分组")]))),_:1})):y("",!0),B.value.length>0?(u(),n(U,{key:2,type:"primary",onClick:qe,round:""},{default:c((()=>l[39]||(l[39]=[b("批量分类")]))),_:1})):y("",!0)])]),d("div",he,[g((u(),n(Ae,{onSelectionChange:D,ref_key:"multipleTableRef",ref:q,onSortChange:He,height:"calc(100vh - 190px)",stripe:"",data:Ke.value},{default:c((()=>[x(R,{type:"selection",width:"30",align:"center"}),x(R,{fixed:"left",sortable:"custom",prop:"id",label:"ID",align:"center",width:"100"}),x(R,{prop:"name",label:"网站名称",sortable:"custom",align:"center",width:"200"}),x(R,{prop:"src",label:"LOGO",align:"center",width:"80"},{default:c((e=>[/^txt:/.test(e.row.src)?(u(),n(F,{key:0,text:e.row.src,bgColor:e.row.bgColor,class:"logoiconRadius"},null,8,["text","bgColor"])):(u(),s("img",{key:1,style:O([{backgroundColor:e.row.bgColor},{"max-width":"100%","max-height":"100%"}]),src:e.row.src,class:"logoiconRadius",alt:"Logo"},null,12,fe))])),_:1}),x(R,{prop:"url","show-overflow-tooltip":"",label:"域名链接",align:"center",width:"260"}),x(R,{prop:"area",width:"200px","show-overflow-tooltip":"",label:"分类",align:"center"},{default:c((e=>[b(m($(e.row.area)),1)])),_:1}),x(R,{prop:"group_id",sortable:"custom",label:"分组",align:"center","min-width":"140"},{default:c((e=>[d("div",be,[(u(!0),s(i,null,r(E.value.filter((l=>e.row.group_ids.indexOf(l.id)>-1)),(e=>(u(),n(v,null,{default:c((()=>[x(k,{size:"small",class:"cursor-context-menu",type:"primary"},{default:c((()=>[b(m(e.name),1)])),_:2},1024)])),_:2},1024)))),256))])])),_:1}),x(R,{prop:"userInfo",width:"200px","show-overflow-tooltip":"",label:"上传用户",align:"center"},{default:c((e=>[e.row.userInfo?(u(),n(P,{key:0},{default:c((()=>[b(m(e.row.userInfo.nickname),1)])),_:2},1024)):y("",!0)])),_:1}),x(R,{prop:"app",label:"是否WebApp",align:"center",width:"140"},{default:c((e=>[1===e.row.app?(u(),n(P,{key:0},{default:c((()=>l[40]||(l[40]=[b("WebApp")]))),_:1})):(u(),n(P,{key:1,type:"info"},{default:c((()=>l[41]||(l[41]=[b("标签")]))),_:1}))])),_:1}),x(R,{prop:"domain",label:"Domain",align:"center",width:"260"}),x(R,{prop:"tips",label:"简介",align:"center",width:"300"}),x(R,{sortable:"custom",prop:"install_num",label:"安装量(次)",align:"center",width:"150"}),x(R,{prop:"create_time",sortable:"custom",label:"创建时间",align:"center",width:"200"}),x(R,{fixed:"right",label:"操作",align:"center",width:"150"},{default:c((e=>[0===e.row.status?(u(),n(U,{key:0,type:"success",size:"small",onClick:l=>Te(e.row)},{default:c((()=>l[42]||(l[42]=[b("审核 ")]))),_:2},1032,["onClick"])):(u(),n(U,{key:1,type:"primary",size:"small",onClick:l=>Te(e.row)},{default:c((()=>l[43]||(l[43]=[b("操作")]))),_:2},1032,["onClick"])),x(U,{type:"danger",size:"small",onClick:l=>Re(e.row.id)},{default:c((()=>l[44]||(l[44]=[b("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[sl,h(De)]]),x(Qe,{"page-size":Xe.value.per_page,onSizeChange:Xe.value.sizes,onCurrentChange:Xe.value.refresh,"page-sizes":[15,20,30,40,50,100],class:"mt-6",layout:"sizes,total,prev,pager,jumper",total:Xe.value.total},null,8,["page-size","onSizeChange","onCurrentChange","total"])]),x(ol,{modelValue:Oe.value,"onUpdate:modelValue":l[25]||(l[25]=e=>Oe.value=e),title:"编辑标签",width:1e3,"close-on-click-modal":!1,top:"5vh"},{default:c((()=>[x(tl,{modelValue:Ie.value,"onUpdate:modelValue":l[24]||(l[24]=e=>Ie.value=e),"label-position":"top"},{default:c((()=>[x(Ze,{label:"名称"},{default:c((()=>[x(W,{modelValue:Ie.value.name,"onUpdate:modelValue":l[3]||(l[3]=e=>Ie.value.name=e),"show-word-limit":"",maxlength:"50",placeholder:"请输入网站title或名称"},null,8,["modelValue"])])),_:1}),x(Ze,{label:"网址"},{default:c((()=>[x(W,{modelValue:Ie.value.url,"onUpdate:modelValue":l[4]||(l[4]=e=>Ie.value.url=e),"show-word-limit":"",maxlength:"1000",placeholder:"请输入网址,请携带http协议"},null,8,["modelValue"])])),_:1}),x(Ze,{label:"logo"},{default:c((()=>[d("div",ye,[Ie.value.src&&/^txt:/.test(Ie.value.src)?(u(),n(F,{key:0,mini:"",style:{width:"30px",height:"30px","margin-right":"10px","border-radius":"4px","flex-shrink":"0"},text:Ie.value.src,bgColor:Ie.value.bgColor},null,8,["text","bgColor"])):Ie.value.src?(u(),s("img",{key:1,src:Ie.value.src,style:{width:"30px",height:"30px","margin-right":"10px","border-radius":"3px"}},null,8,xe)):y("",!0),x(W,{modelValue:Ie.value.src,"onUpdate:modelValue":l[5]||(l[5]=e=>Ie.value.src=e),placeholder:"标签图标地址(120x120)px尺寸最佳"},{append:c((()=>[x($e,{class:"upload-demo",headers:{"Up-Type":"icon"},"show-file-list":!1,"on-success":Be,action:h(I)+h(le).state.site.upload},{default:c((()=>[x(U,{type:"primary"},{default:c((()=>l[45]||(l[45]=[b("上传")]))),_:1})])),_:1},8,["action"])])),_:1},8,["modelValue"]),x(U,{type:"primary",style:{width:"100px","margin-left":"15px"},onClick:Me},{default:c((()=>l[46]||(l[46]=[b("抓取图标")]))),_:1})])])),_:1}),x(Ze,{label:"域名"},{default:c((()=>[x(W,{modelValue:Ie.value.domain,"onUpdate:modelValue":l[6]||(l[6]=e=>Ie.value.domain=e),"show-word-limit":"",maxlength:"251",placeholder:"请输入域名多个可以用,隔开。域名不要携带http协议"},null,8,["modelValue"]),l[47]||(l[47]=d("div",{class:"text-xs mt-1 text-red-500"},"* 如果用户在添加自定义标签时，如果商城有匹配的域名，则直接使用商城的标签信息，不会去抓取目标图标了。 ",-1))])),_:1}),x(Ze,{label:"分类"},{default:c((()=>[x(h(C),{teleported:"",modelValue:Ie.value.area,"onUpdate:modelValue":l[7]||(l[7]=e=>Ie.value.area=e),multiple:"",placeholder:"分类选择可多选",style:{width:"100% !important"}},{default:c((()=>[(u(!0),s(i,null,r(K.value,(e=>(u(),n(v,{key:e.id},{default:c((()=>[e.id>0?(u(),n(h(z),{key:0,label:e.name,value:e.id.toString()},null,8,["label","value"])):y("",!0)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1}),x(Ze,{label:"简介"},{default:c((()=>[x(W,{modelValue:Ie.value.tips,"onUpdate:modelValue":l[8]||(l[8]=e=>Ie.value.tips=e),placeholder:"请简单介绍一下建议30字符以内","show-word-limit":"",maxlength:"200"},null,8,["modelValue"])])),_:1}),x(Ze,{label:"添加后的布局尺寸"},{default:c((()=>[x(h(C),{modelValue:Ie.value.size,"onUpdate:modelValue":l[9]||(l[9]=e=>Ie.value.size=e),placeholder:"默认1x1",style:{width:"100% !important"}},{default:c((()=>[(u(),s(i,null,r(["1x1","1x2","2x1"],(e=>x(v,{key:e.id},{default:c((()=>[x(h(z),{label:e,value:e},null,8,["label","value"])])),_:2},1024))),64))])),_:1},8,["modelValue"])])),_:1}),x(Ze,{label:"是否为WebApp"},{default:c((()=>[x(el,{"active-value":1,"inactive-value":0,modelValue:Ie.value.app,"onUpdate:modelValue":l[10]||(l[10]=e=>Ie.value.app=e)},null,8,["modelValue"])])),_:1}),1===Ie.value.app?(u(),n(Ze,{key:0,label:"WebApp自定义配置（可选配置项）"},{default:c((()=>[d("div",_e,[d("div",we,[x(Ze,{style:{width:"100% !important"},label:"窗口宽度"},{default:c((()=>[x(W,{modelValue:Ie.value.custom.width,"onUpdate:modelValue":l[11]||(l[11]=e=>Ie.value.custom.width=e),placeholder:"窗口打开时默认宽度尺寸"},{append:c((()=>l[48]||(l[48]=[b("px")]))),_:1},8,["modelValue"])])),_:1}),x(Ze,{style:{width:"100% !important"},label:"窗口高度"},{default:c((()=>[x(W,{modelValue:Ie.value.custom.height,"onUpdate:modelValue":l[12]||(l[12]=e=>Ie.value.custom.height=e),placeholder:"窗口打开时默认高度尺寸"},{append:c((()=>l[49]||(l[49]=[b("px")]))),_:1},8,["modelValue"])])),_:1}),x(Ze,{style:{width:"100% !important"},label:"控制栏/背景颜色"},{default:c((()=>[d("div",ke,[x(W,{modelValue:Ie.value.custom.controllerColor,"onUpdate:modelValue":l[13]||(l[13]=e=>Ie.value.custom.controllerColor=e),placeholder:"请输入hex格式颜色值"},null,8,["modelValue"]),x(ll,{"color-format":"hex",modelValue:Ie.value.custom.controllerColor,"onUpdate:modelValue":l[14]||(l[14]=e=>Ie.value.custom.controllerColor=e)},null,8,["modelValue"])])])),_:1}),x(Ze,{style:{width:"100% !important"},label:"窗口模式"},{default:c((()=>[x(h(C),{modelValue:Ie.value.custom.immersion,"onUpdate:modelValue":l[15]||(l[15]=e=>Ie.value.custom.immersion=e)},{default:c((()=>[x(h(z),{label:"标准窗口",value:0}),x(h(z),{label:"沉浸式窗口",value:1})])),_:1},8,["modelValue"])])),_:1})]),d("div",Ve,[x(Ze,{style:{width:"100% !important"},label:"最小化支持"},{default:c((()=>[x(h(C),{modelValue:Ie.value.custom.minimization,"onUpdate:modelValue":l[16]||(l[16]=e=>Ie.value.custom.minimization=e)},{default:c((()=>[x(h(z),{label:"不支持",value:0}),x(h(z),{label:"支持",value:1})])),_:1},8,["modelValue"])])),_:1}),x(Ze,{style:{width:"100% !important"},label:"最大化支持"},{default:c((()=>[x(h(C),{modelValue:Ie.value.custom.maximize,"onUpdate:modelValue":l[17]||(l[17]=e=>Ie.value.custom.maximize=e)},{default:c((()=>[x(h(z),{label:"不支持",value:0}),x(h(z),{label:"支持",value:1})])),_:1},8,["modelValue"])])),_:1}),x(Ze,{style:{width:"100% !important"},label:"尺寸调整"},{default:c((()=>[x(h(C),{modelValue:Ie.value.custom.resize,"onUpdate:modelValue":l[18]||(l[18]=e=>Ie.value.custom.resize=e)},{default:c((()=>[x(h(z),{label:"不支持",value:0}),x(h(z),{label:"支持",value:1})])),_:1},8,["modelValue"])])),_:1}),x(Ze,{style:{width:"100% !important"},label:"用户编辑权限"},{default:c((()=>[x(h(C),{modelValue:Ie.value.custom.userEdit,"onUpdate:modelValue":l[19]||(l[19]=e=>Ie.value.custom.userEdit=e)},{default:c((()=>[x(h(z),{label:"不允许",value:0}),x(h(z),{label:"允许编辑",value:1})])),_:1},8,["modelValue"])])),_:1})])])])),_:1})):y("",!0),x(Ze,{label:"背景颜色"},{default:c((()=>[d("ul",Ce,[(u(),s(i,null,r(Q,(e=>d("li",{onClick:l=>{return a=e,void(Ie.value.bgColor=a);var a}},["rgba(0,0,0,0)"===e?(u(),s("div",ze,[e===Ie.value.bgColor?(u(),s("b",je,"√")):y("",!0)])):(u(),s("div",{key:1,style:O({backgroundColor:e})},[e===Ie.value.bgColor?(u(),s("b",Se,"√")):y("",!0)],4))],8,Ue))),64))]),x(ll,{"show-alpha":"",modelValue:Ie.value.bgColor,"onUpdate:modelValue":l[20]||(l[20]=e=>Ie.value.bgColor=e)},null,8,["modelValue"])])),_:1}),x(Ze,{label:"标签添加量（热度）"},{default:c((()=>[x(al,{modelValue:Ie.value.install_num,"onUpdate:modelValue":l[21]||(l[21]=e=>Ie.value.install_num=e),style:{width:"100% !important"},placeholder:"数值越高排名越高"},null,8,["modelValue"])])),_:1}),x(Ze,{label:"排行"},{default:c((()=>[x(al,{modelValue:Ie.value.hot,"onUpdate:modelValue":l[22]||(l[22]=e=>Ie.value.hot=e),style:{width:"100% !important"},placeholder:"数值越高排名越高"},null,8,["modelValue"])])),_:1}),x(Ze,{label:"可见用户分组 (可多选)"},{default:c((()=>[x(h(C),{modelValue:Ie.value.group_ids,"onUpdate:modelValue":l[23]||(l[23]=e=>Ie.value.group_ids=e),multiple:"",style:{width:"100% !important"},placeholder:"请选择用户分组"},{default:c((()=>[(u(!0),s(i,null,r(E.value,(e=>(u(),n(v,null,{default:c((()=>[x(h(z),{label:e.name,value:e.id},null,8,["label","value"])])),_:2},1024)))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),0===Ie.value.status?(u(),n(U,{key:0,class:"w-full",type:"success",onClick:Ne},{default:c((()=>l[50]||(l[50]=[b("审核通过并保存")]))),_:1})):(u(),n(U,{key:1,type:"primary",style:{width:"100% !important"},onClick:Pe},{default:c((()=>l[51]||(l[51]=[b("保存")]))),_:1}))])),_:1},8,["modelValue"])])]),x(ol,{"close-on-click-modal":!1,modelValue:ee.value,"onUpdate:modelValue":l[30]||(l[30]=e=>ee.value=e),width:"500px",title:"标签分类编辑"},{default:c((()=>[l[54]||(l[54]=d("div",{class:"mb-2"}," 分类名称 ",-1)),x(W,{onKeypress:l[26]||(l[26]=A(_((()=>{}),["stop"]),["enter"])),modelValue:X.value.name,"onUpdate:modelValue":l[27]||(l[27]=e=>X.value.name=e),class:"autofocus mb-4","show-word-limit":"",maxlength:"50",placeholder:"请输入分类名称"},null,8,["modelValue"]),l[55]||(l[55]=d("div",{class:"mb-2"}," 可见分组 (可多选) ",-1)),x(h(C),{modelValue:X.value.group_ids,"onUpdate:modelValue":l[28]||(l[28]=e=>X.value.group_ids=e),multiple:"",style:{width:"100% !important"},placeholder:"请选择用户分组"},{default:c((()=>[(u(!0),s(i,null,r(E.value,(e=>(u(),n(v,null,{default:c((()=>[x(h(z),{label:e.name,value:e.id},null,8,["label","value"])])),_:2},1024)))),256))])),_:1},8,["modelValue"]),l[56]||(l[56]=d("span",{class:"text-red-400 text-xs"},"该设置项仅控制分类列表可见状态，对于标签控制无效，标签需要单独设置。",-1)),X.value.id?(u(),n(ul,{key:0,class:"mt-4",type:"danger",onClick:l[29]||(l[29]=e=>{return l={id:X.value.id},void j.confirm("是否删除当前标签分类","危险警告").then((e=>{a({url:"/LinkStore/createFolder",method:"post",data:{type:"del",id:l.id}}).then((e=>{w.success(e.msg),1===e.code&&(Y(),ee.value=!1)}))}));var l})},{default:c((()=>l[52]||(l[52]=[b("删除该分类 ")]))),_:1})):y("",!0),d("div",Le,[x(U,{class:"m-auto w-2/5",type:"primary",onClick:Fe},{default:c((()=>l[53]||(l[53]=[b("保存")]))),_:1})])])),_:1},8,["modelValue"]),M.value?(u(),n(ae,{key:0,onClick:l[31]||(l[31]=()=>{M.value=!1,Ye()})})):y("",!0)],64)}}};export{Oe as default};
